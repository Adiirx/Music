<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For You</title>

<style>
*{
box-sizing:border-box;
margin:0;
padding:0;
font-family:'Courier New', monospace;
-webkit-tap-highlight-color:transparent;
}

body{
height:100vh;
overflow:hidden;
background:black;
}

/* Screen */
.screen{
position:fixed;
width:100%;
height:100%;
display:flex;
justify-content:center;
align-items:center;
flex-direction:column;
background-size:cover;
background-position:center;
transition:opacity .5s ease;
}

.hidden{
opacity:0;
pointer-events:none;
}

/* Popup */
.box{
background:rgba(255,255,255,0.95);
padding:25px;
border-radius:20px;
text-align:center;
width:85%;
max-width:350px;
box-shadow:0 10px 40px rgba(0,0,0,0.3);
}

.box h2{
font-size:18px;
margin-bottom:20px;
}

.btn{
margin:8px;
padding:10px 20px;
border:none;
border-radius:20px;
background:#ffb6c1;
cursor:pointer;
transition:.3s;
}

.btn:active{
transform:scale(.9);
}

/* Candle Section */
#candleSection{
background:radial-gradient(circle at 70% 20%, #1a2a6c, #0f2027 70%);
color:white;
}

/* Stars */
.star{
position:absolute;
width:2px;
height:2px;
background:white;
border-radius:50%;
animation:twinkle 3s infinite alternate;
}

@keyframes twinkle{
from{opacity:.3}
to{opacity:1}
}

.candle-wrapper{
position:relative;
width:100px;
height:220px;
margin-bottom:40px;
}

.candle-body{
width:60px;
height:160px;
background:linear-gradient(to bottom,#fffbe8,#f4eac6);
position:absolute;
bottom:0;
left:20px;
border-radius:8px;
}

.wick{
width:4px;
height:18px;
background:#333;
position:absolute;
top:30px;
left:48px;
}

.flame{
width:30px;
height:50px;
background:radial-gradient(circle at 50% 30%, #fff6a5,#ff9d00);
border-radius:50% 50% 40% 40%;
position:absolute;
top:-20px;
left:35px;
box-shadow:0 0 40px #ff9d00,0 0 70px yellow;
animation:flicker .15s infinite alternate;
}

@keyframes flicker{
0%{transform:scale(1)}
100%{transform:scale(1.1)}
}

#blowBtn{
padding:15px 35px;
border-radius:50px;
border:1px solid rgba(255,255,255,.3);
background:rgba(255,255,255,.1);
color:white;
font-size:15px;
backdrop-filter:blur(10px);
box-shadow:0 0 20px rgba(255,255,255,0.2);
}

#finalScreen{
position:absolute;
width:100%;
height:100%;
background:black;
display:none;
justify-content:center;
align-items:center;
padding:30px;
text-align:center;
}

#typingText{
font-size:18px;
line-height:1.7;
white-space:pre-wrap;
}
</style>
</head>
<body>

<!-- INTRO -->
<div id="intro" class="screen"
style="background-image:url('https://raw.githubusercontent.com/Adiirx/my-website-images/main/171506da4c1b098c1675dc79f36e918d.jpg')">
<div class="box">
<h2>before we start you want some flowers ðŸ¤­ðŸŽ€</h2>
<button class="btn" onclick="goToFlowers()">Yes</button>
<button class="btn" onclick="startCandleDirect()">No</button>
</div>
</div>

<!-- CANDLE ONLY (simplified to avoid multi-init bugs) -->
<div id="candleSection" class="screen hidden">

<div id="starsContainer"></div>

<div class="candle-wrapper">
<div class="flame" id="candleFlame"></div>
<div class="wick"></div>
<div class="candle-body"></div>
</div>

<button id="blowBtn">Blow the candle (<span id="count">0</span>/10)</button>

<div id="finalScreen">
<div id="typingText"></div>
</div>
</div>

<audio id="bgMusic" preload="auto" loop>
<source src="https://raw.githubusercontent.com/Adiirx/my-website-images/main/%5BRoyalty_Free_Music%5D_Dreaming_-_Inspiring_Uplifting_Piano_320k.mp3" type="audio/mpeg">
</audio>

<script>

let musicStarted=false;
let candleInitialized=false;

const intro=document.getElementById("intro");
const candleSection=document.getElementById("candleSection");
const music=document.getElementById("bgMusic");

function startMusic(){
if(!musicStarted){
music.volume=0;
music.play().catch(()=>{});
let fade=setInterval(()=>{
if(music.volume<0.35){
music.volume+=0.02;
}else clearInterval(fade);
},200);
musicStarted=true;
}
}

function goToFlowers(){
startMusic();
intro.classList.add("hidden");
candleSection.classList.remove("hidden");
initCandle();
}

function startCandleDirect(){
goToFlowers();
}

function initCandle(){
if(candleInitialized) return;
candleInitialized=true;

/* Create stars once */
const starsContainer=document.getElementById("starsContainer");
for(let i=0;i<60;i++){
let s=document.createElement("div");
s.classList.add("star");
s.style.top=Math.random()*100+"vh";
s.style.left=Math.random()*100+"vw";
starsContainer.appendChild(s);
}

let clicks=0;
const flame=document.getElementById("candleFlame");
const count=document.getElementById("count");
const final=document.getElementById("finalScreen");
const typing=document.getElementById("typingText");

document.getElementById("blowBtn").onclick=()=>{
clicks++;
count.innerText=clicks;
flame.style.transform=`scale(${1-(clicks/15)})`;

if(clicks>=10){
flame.style.display="none";
setTimeout(()=>{
final.style.display="flex";
typing.textContent="";  // prevent duplication
typeWriter("Maybe you're not my Valentineâ€¦\n\nbut if I had to choose someone to smile for today,\nit would still be you.",0);
},800);
}
};
}

function typeWriter(text,i){
if(i<text.length){
document.getElementById("typingText").textContent+=text.charAt(i);
setTimeout(()=>typeWriter(text,i+1),text.charAt(i)==="\n"?600:80);
}
}

</script>
</body>
</html>
